<html>

<head>
  <title>%TITLE% Config</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="./favicon.png">
  <!--<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">-->
  <style>
    .hide{
      display: none;
    }
  </style>
</head>

<body onLoad="onLoad();">

  <b><a href="./">Home</a></b>
  <form action="/config" method="POST">
    <span style="font-weight:bold;color:red;" class="%PARAM_SAVED%">Configuration Saved.
      <span id="restartRequired" class="%RESTART_REQUIRED%">Restart required (will be done in 2 second)</span>
    </span><br/><br/>
    <table border="0" style="width:100%%;max-width:800px">
      <tbody>
        <tr>
          <td>Bluetti device id:</td>
          <td><input type="text" size="40" name="bluetti_device_id" value="%BLUETTI_DEVICE_ID%"></td>
          <td><a href="./resetConfig" target="_blank" style="color:red">reset FULL configuration</a></td>
        </tr>
        <tr>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>Available Wifi Networs:</td>
          <td><a href="./config">Refresh</a></td>
        </tr>
        %WIFI_SCAN%
        <tr>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>Start in AP Mode:</td>
          <td><input type="checkbox" name="APMode" value="APModeBool" %B_APMODE%></td>
        </tr>
        <tr>
          <td>Wifi SSID:</td>
          <td><input type="text" size="50" name="ssid" value="%SSID%"></td>
        </tr>
        <tr>
          <td>Wifi PWD:</td>
          <td><input type="password" size="50" name="password" value="%PASSWORD%"></td>
        </tr>
        %IFTTT%
        %EXT_BAT%
        <tr>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>Show Debug Infos (FreeHeap, debugLog Link, etc...):</td>
          <td><input type="checkbox" name="showDebugInfos" value="showDebugInfosBool" %B_SHOW_DEBUG_INFOS%></td>
        </tr>
        <tr>
          <td>Enable Debug logging to File:</td>
          <td><input type="checkbox" name="useDbgFilelog" value="useDbgFilelogBool" %B_USE_DBG_FILE_LOG%></td>
        </tr>
        <tr>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>Bluetti Data Log Auto Start (HH:MM) (empty=no start):</td>
          <td><input type="text" size="5" name="BtLogTime_Start" value="%BTLOGTIME_START%"></td>
        </tr>
        <tr>
          <td>Bluetti Data Log Auto Stop (HH:MM) (empty=no stop):</td>
          <td><input type="text" size="5" name="BtLogTime_Stop" value="%BTLOGTIME_STOP%"></td>
        </tr>
        <tr>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>Clear All Logs and Reboot:</td>
          <td><input type="checkbox" name="clrSpiffOnRst" value="clrSpiffOnRstBool" %B_CLRSPIFF_ON_RST%></td>
        </tr>
      </tbody>
    </table><input type="submit" value="Save">
  </form>
  <script>
    function onLoad(){
      if (document.getElementById('restartRequired').className != 'hide'){
        setTimeout(function() { location.href = './'; }, 2500);
      }
    }
  </script>
</body>

</html>