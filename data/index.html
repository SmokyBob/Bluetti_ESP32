<html>

<head>
  <title>%TITLE%</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- no icon e style here because if connected to BLE we end up without memory :-( -->
  <link rel="icon" href="./favicon.png">
  <link rel="stylesheet" href="./styles.css">
  <!-- Temperature and humidity icons -->
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,1,0" />
</head>

<body>
  %AUTO_REFRESH_B%
  <table id="tblData" border="0" style="width:100%%;max-width:900px">
    <tbody>
      <tr>
        <td>host:</td>
        <td>%HOST%</td>
        <td><a href="#" onclick="jsCall('./rebootDevice',2500)">Reboot this device</a></td>
      </tr>
      <tr>
        <td>SSID:</td>
        <td>%SSID%</td>
        <td><a href="./resetWifiConfig">Reset WIFI config</a></td>
      </tr>
      <tr>
        <td>WiFiRSSI:</td>
        <td>%WiFiRSSI%</td>
        <td><b><a href="./config">Change Configuration</a></b></td>
      </tr>
      <tr>
        <td>MAC:</td>
        <td>%MAC%</td>
        <td><b><a style="color:red" href="./update" target="_blank">OTA Update</a></b></td>
      </tr>
      <tr>
        <td>uptime :</td>
        <td id="UPTIME"></td>
        <td>Running since: <span id="RUNNING_SINCE">waiting ...</span></td>
      </tr>
      <tr>
        <td>uptime (d):</td>
        <td id="UPTIME_D">waiting ...</td>
        <td>Last WebSocket message at: <span id="lastWebSocketTime">waiting ...</span></td>
      </tr>
      <tr>
        <td>Bluetti device id:</td>
        <td>%BLUETTI_ID%</td>
        %BT_FILE_LOG%
      </tr>
      <tr>
        <td>BT connected: </td>
        <td><input id="btConnected" class="chkBtConnected" type="checkbox" onclick="return false;"></td>
        <td>
          <input id="btnInvertConnect" type="button" onclick="jsCall('./btConnectionInvert');"
            value="Disconnect from BT">
        </td>
      </tr>
      <tr>
        <td>BT last message time:</td>
        <td id="BT_LAST_MEX_TIME">waiting ...</td>
        <td style="vertical-align: middle;" class="btConnected">
          <div style="display:inline-flex">
            Ac Output:
            <label class="switch">
              <input id="chk_AC_OUTPUT_ON" type="checkbox" onclick="onCheckChanged('AC_OUTPUT_ON',this);"
                %B_AC_OUTPUT_ON%>
              <span class="slider round"></span>
            </label>
            &nbsp;
            DC Output:
            <label class="switch">
              <input id="chk_DC_OUTPUT_ON" type="checkbox" onclick="onCheckChanged('DC_OUTPUT_ON',this);"
                %B_DC_OUTPUT_ON%>
              <span class="slider blue round"></span>
            </label>
          </div>
        </td>
      </tr>
      <tr>
        <td colspan="3">
          <hr>
        </td>
      </tr>
      <tr class="btConnected">
        <td>Battery Percent (min) <span id="BATT_PERC_MIN">waiting ...</span></td>
        <td>DC Input (MAX) <span id="DC_INPUT_MAX">waiting ...</span></td>
        <td>AC Input (MAX) <span id="AC_INPUT_MAX">waiting ...</span></td>
      </tr>
      <tr class="btConnected">
        <td>Battery Percent (MAX) <span id="BATT_PERC_MAX">waiting ...</span></td>
        <td>DC Output (MAX) <span id="DC_OUTPUT_MAX">waiting ...</span></td>
        <td>AC Output (MAX) <span id="AC_OUTPUT_MAX">waiting ...</span></td>
      </tr>
      <tr class="temperature_sensor">
        <td><span class="material-symbols-outlined">thermometer</span> <span id="TEMPERATURE_CURRENT">waiting ...</span>
          (MAX) <span id="TEMPERATURE_MAX">waiting...</span></td>
        <td><span class="material-symbols-outlined">humidity_percentage</span> <span id="HUMIDITY_CURRENT">waiting
            ...</span>
          (MAX) <span id="HUMIDITY_MAX">waiting...</span></td>
        <td></td>
      </tr>
      <tr class="ext_battery">
        <td><span class="material-symbols-outlined">electric_bolt</span> <span id="CURR_EXT_VOLTAGE">waiting ...</span>
        </td>
        <td>
          <div style="display:inline-flex">
            <span class="material-symbols-outlined">switch</span>
            <label class="switch">
              <input id="chk_PWM_SWITCH" type="checkbox" onclick="onCheckChanged('PWM_SWITCH',this);" %B_PWM_SWITCH%>
              <span class="slider red round"></span>
            </label>
          </div>
        </td>
        <td>
          <div style="display:inline-flex" id="div_220_RELAY">
            <span class="material-symbols-outlined">power</span>
            <label class="switch">
              <input id="chk_220_RELAY" type="checkbox" onclick="onCheckChanged('220_RELAY',this);" %B_220_RELAY%>
              <span class="slider red round"></span>
            </label>
          </div>
        </td>
      </tr>
      <tr>
        <td colspan="3">
          <hr>
        </td>
      </tr>
      %DEBUG_INFOS%
      <tr>
        <td colspan="4" class="btConnected"><b>Device States</b></td>
      </tr>
    </tbody>
  </table>
</body>

<script src="./index.js"></script>

</html>